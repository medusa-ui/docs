<svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="1143" height="1614"><desc>title%20Heartbeat%20channel%0A%0Anote%20over%20Medusa%3A%23%20Initial%20startup%0AMedusa-%3EHydra%3AChannel%20opens.%20Name%20%2B%20Active%20paths%20%2F%20resources%0Anote%20over%20Hydra%3ARegisters%20in%20local%20memory%20or%20redis.%20Updates%20overallRouteHashKey%0Anote%20over%20Hydra%3ARegisters%20FluxSink%20for%20this%20service%0AHydra-%3EHydra%3ACheck%20overallRouteHashKey%2C%20if%20changed%20reload%20Cloud%20Gateway%20routes%0AHydra-%3E%3EMedusa%3AResponds%20with%20other%20active%20services%0A%0Anote%20over%20Medusa%3A%23%20A%20render%20requires%20a%20fragment%20tag%20to%20resolve%0AMedusa-%3EHydra%3AList%3CFragmentRequest%3E%0Anote%20over%20Hydra%3ALookup%20relevant%20FluxSinks%0AHydra--%3EMedusa%3AUse%20FluxSink%20to%20forward%20relevant%20List%3CFragmentRequest%3E%0Anote%20over%20Medusa%3A%20Render%20locally%2C%20update%20Session%0AMedusa-%3E%3EHydra%3ARenderedFragments%0Anote%20over%20Hydra%3ACombines%20RenderedFragments%20of%20all%20services%20into%20a%20ResolvedFragements%20object%2C%20combines%20Session%20updates%0AHydra-%3E%3EMedusa%3A%20Resolved%20Fragement%0Anote%20over%20Medusa%3ACompletes%20rendering%2C%20updates%20Session</desc><defs/><g><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g/><g><rect fill="white" stroke="none" x="0" y="0" width="1143" height="1614"/></g><g><text fill="black" stroke="none" font-family="sans-serif" font-size="16.5pt" font-style="normal" font-weight="normal" text-decoration="normal" x="482.1033230932421" y="39.58145414999999" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Heartbeat channel</text></g><g/><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 195.99899638296876 154.895423907 L 195.99899638296876 1614.1317002370001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 639.5512981997656 154.895423907 L 639.5512981997656 1614.1317002370001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="20.298181615384618,8.795878700000001"/></g><g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 141.29111018907813 83.648806437 L 250.70688257685939 83.648806437 L 250.70688257685939 154.895423907 L 141.29111018907813 154.895423907 L 141.29111018907813 83.648806437 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="169.92169535757813" y="128.507787807" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Medusa</text></g><path fill="none" stroke="none"/><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 591.3681083559726 83.648806437 L 687.7344880435585 83.648806437 L 687.7344880435585 154.895423907 L 591.3681083559726 154.895423907 L 591.3681083559726 83.648806437 Z" stroke-miterlimit="10" stroke-width="4.222021776" stroke-dasharray=""/></g><g><g/><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="619.9986935244726" y="128.507787807" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Hydra</text></g></g><g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 111.3863229328125 207.67069610700003 L 256.862797343125 207.67069610700003 L 280.611669833125 231.41956859700002 L 280.611669833125 268.362259137 L 111.3863229328125 268.362259137 L 111.3863229328125 207.67069610700003 M 256.862797343125 207.67069610700003 L 256.862797343125 231.41956859700002 L 280.611669833125 231.41956859700002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="148.3290134728125" y="244.61338664700003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"># Initial startup</text></g><g><g><rect fill="white" stroke="none" x="254.30381828261716" y="307.94371328700004" width="326.9426580175" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="258.26196369761715" y="331.69258577700003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Channel opens. Name + Active paths / resources</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 195.99899638296876 342.247640217 L 617.8254778107656 342.247640217" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(639.5512981997656,342.247640217) translate(-639.5512981997656,-342.247640217)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 617.5616014497656 331.252791842 L 639.5512981997656 342.247640217 L 617.5616014497656 353.24248859200003 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 387.50490892929685 381.82909436700004 L 867.8488149802344 381.82909436700004 L 891.5976874702344 405.57796685700004 L 891.5976874702344 442.52065739700004 L 387.50490892929685 442.52065739700004 L 387.50490892929685 381.82909436700004 M 867.8488149802344 381.82909436700004 L 867.8488149802344 405.57796685700004 L 891.5976874702344 405.57796685700004" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="424.44759946929685" y="418.77178490700004" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Registers in local memory or redis. Updates overallRouteHashKey</text></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 492.2185472349609 482.10211154700005 L 763.1351766745703 482.10211154700005 L 786.8840491645703 505.85098403700005 L 786.8840491645703 542.793674577 L 492.2185472349609 542.793674577 L 492.2185472349609 482.10211154700005 M 763.1351766745703 482.10211154700005 L 763.1351766745703 505.85098403700005 L 786.8840491645703 505.85098403700005" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="529.1612377749609" y="519.044802087" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Registers FluxSink for this service</text></g><g><g><rect fill="white" stroke="none" x="670.7766675847656" y="582.3751287270001" width="463.98629815421873" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="674.7348129997656" y="606.1240012170001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Check overallRouteHashKey, if changed reload Cloud Gateway routes</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 639.5512981997656 616.679055657 L 745.1018425997656 616.679055657 L 745.1018425997656 650.982982587 L 661.2771185887656 650.982982587" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(639.5512981997656,650.982982587) translate(-639.5512981997656,-650.982982587)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 661.5409949497656 639.9881342120001 L 639.5512981997656 650.982982587 L 661.5409949497656 661.977830962 Z"/></g></g><g><g><rect fill="white" stroke="none" x="296.8915029139648" y="690.564436737" width="241.7672887548047" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="300.8496483289648" y="714.3133092270001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Responds with other active services</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 639.5512981997656 724.868363667 L 199.29745089546876 724.868363667" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(195.99899638296876,724.868363667) translate(-195.99899638296876,-724.868363667)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 218.6066988479022 714.782875420993 L 198.47101924270254 724.868363667 L 218.6066988479022 734.953851913007" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 13.19381805 764.449817817 L 355.0553022259375 764.449817817 L 378.8041747159375 788.1986903070001 L 378.8041747159375 825.141380847 L 13.19381805 825.141380847 L 13.19381805 764.449817817 M 355.0553022259375 764.449817817 L 355.0553022259375 788.1986903070001 L 378.8041747159375 788.1986903070001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="50.136508590000005" y="801.3925083570001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve"># A render requires a fragment tag to resolve</text></g><g><g><rect fill="white" stroke="none" x="335.1806569666992" y="864.7228349970001" width="165.18898064933595" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="339.1388023816992" y="888.4717074870001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">List&lt;FragmentRequest&gt;</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 195.99899638296876 899.026761927 L 617.8254778107656 899.026761927" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(639.5512981997656,899.026761927) translate(-639.5512981997656,-899.026761927)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 617.5616014497656 888.0319135520001 L 639.5512981997656 899.026761927 L 617.5616014497656 910.021610302 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 516.6387132505859 938.6082160770001 L 738.7150106589452 938.6082160770001 L 762.4638831489452 962.3570885670001 L 762.4638831489452 999.2997791070001 L 516.6387132505859 999.2997791070001 L 516.6387132505859 938.6082160770001 M 738.7150106589452 938.6082160770001 L 738.7150106589452 962.3570885670001 L 762.4638831489452 962.3570885670001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="553.5814037905859" y="975.5509066170001" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Lookup relevant FluxSinks</text></g><g><g><rect fill="white" stroke="none" x="227.22436576796872" y="1038.881233257" width="381.10156304679685" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="231.1825111829687" y="1062.630105747" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Use FluxSink to forward relevant List&lt;FragmentRequest&gt;</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 639.5512981997656 1073.185160187 L 217.72481677196876 1073.185160187" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray="10.555054440000001"/><g transform="translate(195.99899638296876,1073.185160187) translate(-195.99899638296876,-1073.185160187)"><path fill="black" stroke="none" paint-order="stroke fill markers" d=" M 217.98869313296876 1062.1903118120001 L 195.99899638296876 1073.185160187 L 217.98869313296876 1084.180008562 Z"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 58.54811950263672 1112.7666143370002 L 309.7010007733008 1112.7666143370002 L 333.4498732633008 1136.5154868270001 L 333.4498732633008 1173.4581773670002 L 58.54811950263672 1173.4581773670002 L 58.54811950263672 1112.7666143370002 M 309.7010007733008 1112.7666143370002 L 309.7010007733008 1136.5154868270001 L 333.4498732633008 1136.5154868270001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="95.49081004263672" y="1149.709304877" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Render locally, update Session</text></g><g><g><rect fill="white" stroke="none" x="346.5908208460937" y="1213.0396315170003" width="142.36865289054688" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="350.5489662610937" y="1236.7885040070003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">RenderedFragments</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 195.99899638296876 1247.3435584470003 L 636.2528436872656 1247.3435584470003" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(639.5512981997656,1247.3435584470003) translate(-639.5512981997656,-1247.3435584470003)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 616.9435957348321 1237.2580702009932 L 637.0792753400318 1247.3435584470003 L 616.9435957348321 1257.4290466930074" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 248.96169603867185 1286.9250125970002 L 1006.3920278708594 1286.9250125970002 L 1030.1409003608594 1310.6738850870001 L 1030.1409003608594 1347.6165756270002 L 248.96169603867185 1347.6165756270002 L 248.96169603867185 1286.9250125970002 M 1006.3920278708594 1286.9250125970002 L 1006.3920278708594 1310.6738850870001 L 1030.1409003608594 1310.6738850870001" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="285.90438657867185" y="1323.867703137" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Combines RenderedFragments of all services into a ResolvedFragements object, combines Session updates</text></g><g><g><rect fill="white" stroke="none" x="345.7783666224609" y="1387.1980297770003" width="143.9935613378125" height="34.30392693"/></g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="349.7365120374609" y="1410.9469022670003" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Resolved Fragement</text></g><g><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 639.5512981997656 1421.5019567070003 L 199.29745089546876 1421.5019567070003" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g transform="translate(195.99899638296876,1421.5019567070003) translate(-195.99899638296876,-1421.5019567070003)"><path fill="none" stroke="black" paint-order="fill stroke markers" d=" M 218.6066988479022 1411.4164684609932 L 198.47101924270254 1421.5019567070003 L 218.6066988479022 1431.5874449530074" stroke-miterlimit="10" stroke-width="2.1989696750000003"/></g></g><path fill="white" stroke="black" paint-order="fill stroke markers" d=" M 32.742829280468754 1461.0834108570002 L 335.50629099546876 1461.0834108570002 L 359.25516348546876 1484.8322833470002 L 359.25516348546876 1521.7749738870002 L 32.742829280468754 1521.7749738870002 L 32.742829280468754 1461.0834108570002 M 335.50629099546876 1461.0834108570002 L 335.50629099546876 1484.8322833470002 L 359.25516348546876 1484.8322833470002" stroke-miterlimit="10" stroke-width="2.1989696750000003" stroke-dasharray=""/><g><text fill="black" stroke="none" font-family="sans-serif" font-size="11pt" font-style="normal" font-weight="normal" text-decoration="normal" x="69.68551982046876" y="1498.026101397" text-anchor="start" dominant-baseline="alphabetic" xml:space="preserve">Completes rendering, updates Session</text></g></g><g/><g/></g></svg>